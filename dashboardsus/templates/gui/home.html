{% extends "base.html" %}

{% block header %}
    {% include "gui/partials/header.html" %}
{% endblock %}

{% block container %}
    <div id="container" style="width:100%; height:400px;"></div>
    <div id="container2" style="width:100%; height:400px;"></div>
    <div id="container3" style="width:100%; height:400px;"></div>
{% endblock %}

{% load jsonify %}

{% block js %}

    <script>
    /** Inicio gráfico de pacientes homes e mulheres **/
       $(function () {
            $('#container').highcharts({
                chart: {
                    backgroundColor: "#f9f5f2",
                    plotBackgroundColor: "#f9f5f2",
                    plotBorderWidth: 0,
                    plotShadow: false
                },
                title: {
                    text: 'Pacientes Atendidos'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.y}</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Quantidade',
                    data: [
                        ['Homens',   {{ homens|jsonify }}],
                        ['Mulheres', {{ mulheres|jsonify }}],
                    ],
                    colors: ['#00A3EB', '#E03834']
                }],

            });
        });
    /**Fim gráfico de pacientes homes e mulheres**/

    /**Inicio gráfico de consultas dentro e fora da área**/
        $(function () {
            $('#container2').highcharts({
                chart: {
                    backgroundColor: "#f9f5f2",
                    plotBackgroundColor: "#f9f5f2",
                    plotBorderWidth: 0,
                    plotShadow: false
                },
                title: {
                    text: 'Consultas por abrangência'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.y}</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Quantidade',
                    data: [
                        ['Consultas em área de abrangência',   {{ qtd_dentro|jsonify }}],
                        ['Consultas fora de área de abrangência', {{ qtd_fora|jsonify }}],
                    ],
                    colors: ['#00A3EB', '#E03834']
                }],

            });
        });
    /**Fim gráfico de consultas dentro e fora da área**/
    </script>
    <style>
        text[text-anchor="end"] {
            display:none;
        }
    </style>
{% endblock %}